<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PV de Mise En Service</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/compressorjs@1.2.1/dist/compressor.min.js"></script>
  </head>
  <body>
    <header>
      <h1>PV de Mise En Service</h1>
    </header>

    <main>
      <form id="pvForm">
		<hr>
		<h3>Informations Générales</h3>
		<label for="chantier">Nom du chantier *</label>
        <input type="text" id="chantier" oninput="this.value = this.value.toUpperCase()" maxlength="22" required />

        <label for="centrale">Centrale *</label>
        <select id="centrale" required>
            <option value="" disabled selected>Sélectionnez une centrale</option>
            <option value="OUESSANT">OUESSANT</option>
            <option value="MOLENE">MOLENE</option>
            <option value="SEIN">SEIN</option>
			<option value="CHAUSEY">CHAUSEY</option>
			<option value="GLENAN">GLENAN</option>
        </select>

		<label for="responsable">Responsable du chantier *</label>
        <input type="text" id="responsable" oninput="this.value = this.value.toUpperCase()" maxlength="20" required />

        <label for="entreprise">Entreprise(s) intervenante(s) *</label>
        <input type="text" id="entreprise" oninput="this.value = this.value.toUpperCase()" required />
		<!-- Bouton pour ajouter une nouvelle entreprise -->
		<div id="entreprisesSupplementaires">
			<button type="button" id="addEntreprise">Ajouter une entreprise</button>
		</div>
		<hr>
		<h3 for="description">Description du projet / chantier *</h3>
        <textarea id="description" rows="4" required></textarea>
        
		<hr>
        <h3>Historique</h3>
		<label for="startDate">Date de début de chantier *</label>
        <input type="date" id="startDate" required />

        <label for="endDate">Date de fin de chantier *</label>
        <input type="date" id="endDate" required />
		
        <label for="mesDate">Date de Mise en Service * </label>
        <input type="date" id="mesDate" required />
		
		<hr>
        <h3 for="photos">Photos</h3>
        <div id="photo-preview"></div>
		<input
          type="file"
          id="photos"
          class="photo-upload"
          accept="image/*"
          multiple
        />

        <!-- Nouveau bouton pour prendre une photo en direct -->
        <button type="button" id="take-photo">Prendre une photo </i></button>
		<video id="camera" autoplay></video>
		<canvas id="camera-canvas" style="display: none;"></canvas>
		<!-- Bouton capture photo -->
		<div style="text-align: center; margin-top: 10px;">
			<button type="button" id="save-photo" style="display: none;" class="capture-button">
				<i class="fas fa-camera"></i>
				<!--<div class="inner-circle"></div>-->
			</button>
		</div>
		
		<hr>
        <h3>Signature</h3>
        <div class="signature-group">
           <label for="signataireNom">Nom du signataire *</label>
           <input type="text" id="signataireNom" placeholder="Nom Prénom" style="text-transform: uppercase;" required />
        <div>
            <label>Signature EDF *</label>
            <canvas id="signatureCanvas" ></canvas>
            <button type="button" id="clearSignature" class="remove-sign" >Effacer</button>
          </div>
        </div>

        <button type="submit" id="generatePDF">Générer le PDF</button>
      </form>
    </main>

    <footer>
      <p>EDF SEI - PV de Mise en Service</p>
    </footer>

    <script src="script.js"></script>
  </body>
</html>